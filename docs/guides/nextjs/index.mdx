import NextjsGuidesSection from "@site/src/components/NextjsGuidesSection";
import createNextAppOutput from "!!raw-loader!./_createNextAppOutput";
import runNextAppOutput from "!!raw-loader!./_runNextAppOutput";
import tigrisCreateAppOutput from "!!raw-loader!./_tigrisCreateAppOutput";
import CodeBlock from "@theme/CodeBlock";
import TerminalWindow from "@site/src/components/TerminalWindow/index";
import Installation from "../../includes/_install_cloud_login.mdx";
import runDevOutput from "!!raw-loader!./_runDevOutput";
import loginOutput from "!!raw-loader!./_loginOutput";

# Using Tigris with Next.js

Tigris is the scalable real-time backend for Next.js applications. Build
data-rich features, seamlessly implement search, and easily connect
serverless functions.

### Getting started

<Installation />

### Create Tigris Project

Every Tigris application is a project with a dedicated database and cloud credentials. 
To create a Todo application, Login or Signup to your Tigris console and create a new project.

![create-project-result-output](/img/gifs/create-project-output.gif)

> Your project name is automatically your database name. So you do not need to create a database.


### Create the Tigris cloud credentials

Your application requires credentials to be able to use Tigris. To create Tigris cloud credentials for your application, click on `Todo > Application Keys > New Key`.

![create-project-crendentials-output](/img/gifs/create-project-credential-output.gif)

Then enter the details for your Application Keys in the input boxes and hit the `Create` button:

![create-token-output](/img/screenshots/create-project-keys.png)

Then your application `Client ID` and `Client Secret` will be generated.

![project-keys](/img/screenshots/project-keys.png)

> Keep those credentials confidential to avoid unauthorized access to your application.


### Scaffold your Next.js app

Tigris allows you to bootstrap Next.js apps using the Tigris CLI tool. 

```shell
latest command goes here
```

This will prompt the project name. Enter `todo` and hit the Enter key. Then you will be prompted to pick the template for your project; select the `nextjs-api-routes` template and hit Enter key: 

<details>
  <summary>Output</summary>
  <TerminalWindow>
    <CodeBlock language="shell">{createNextAppOutput}</CodeBlock>
  </TerminalWindow>
</details>

### Add the Tigris cloud credentials
You must add the Tigris credentials you created to your application environment file for your Tigris application to work. 

Use the `Client ID` and `Client Secret` you created and add them as `TIGRIS_CLIENT_ID` and `TIGRIS_CLIENT_SECRET` respectively. Then specify your project in `TIGRIS_PROJECT`  in the file `.env.development.local` in `todo` directory.

Now, create the environment file `.env.development.local` and add the application credentials generated above to it:

```dotenv title=.env.development.local
TIGRIS_URI=api.dev.tigrisdata.cloud
TIGRIS_PROJECT=project_here
TIGRIS_CLIENT_ID=client_id_here
TIGRIS_CLIENT_SECRET=client_secret_here
```

### Run

Run the app and see it automatically create your databases and collections

```shell
cd todo
npm run dev
```

<details>
  <summary>Output</summary>
  <TerminalWindow>
    <CodeBlock language="shell">{runNextAppOutput}</CodeBlock>
  </TerminalWindow>
</details>

:tada: Your full-stack web app is ready and accessible on `localhost:3000` in the browser.

### Guides

Here you will find a set of guides to help you quickly build a dynamic data-rich
Next.js app with Tigris.

<NextjsGuidesSection className="two-cols" />
