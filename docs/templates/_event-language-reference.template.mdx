import EventSpecs from "./_event-specs.template.mdx";
import CodeBlock from "@theme/CodeBlock";
import { AsyncCodeBlock } from "./commons";

Tigris has built-in event streaming support. To subscribe and publish to a topic, you can use Publish and Subscribe API.

<div>{props.loadOverview && <EventSpecs />}</div>

### Example Topic

As we have seen in other examples an e-commerce website collection catalog. Now, let's say you want to have an order
topic where an event is fired when an order is placed. The first step is to set up this topic object.

<AsyncCodeBlock
  codeLang={props.codeLang}
  defaultExample={props.createCollection}
  asyncExample={props.asyncCreateCollection}
/>

### Publish a Single Message

Publish API can be used to publish one or more messages to the topic.

<AsyncCodeBlock
  codeLang={props.codeLang}
  defaultExample={props.simplePublish}
  asyncExample={props.asyncSimplePublish}
/>

### Publish Many Messages

Similar to a single message, many messages can be published in a single call.

<AsyncCodeBlock
  codeLang={props.codeLang}
  defaultExample={props.batchPublish}
  asyncExample={props.asyncBatchPublish}
/>

### Subscribe to a Topic

Subscribe API can be used to subscribe to a topic. Subscribe to this topic in a different session like below.

<AsyncCodeBlock
  codeLang={props.codeLang}
  defaultExample={props.simpleSubscribe}
  asyncExample={props.asyncSimpleSubscribe}
/>

### Subscribe to only messages that you need

You can also send a filter during the Subscribe request that way you'll only receive events that match the filter.
Try this in a different session and send some orders like above that have status set as `canceled`.

<AsyncCodeBlock
  codeLang={props.codeLang}
  defaultExample={props.filterSubscribe}
  asyncExample={props.asyncFilterSubscribe}
/>
