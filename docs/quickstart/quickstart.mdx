---
id: quickstart
slug: /quickstart
---

# Quickstart

The following guide will get you up and running with Tigris.

:::tip
Quickly add data and easily retrieve or edit that data through simple and
intuitive APIs.

Easily evolve the data model as your application evolves
without worrying about breaking a rigid schema.

:::

## Startup Tigris on your local machine

import StartupLocally from "../includes/_startup_tigris_locally.mdx";

<StartupLocally />

## 5-minute quickstart

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

<Tabs className="unique-tabs">
<TabItem value="http" label="HTTP">

**Prerequisites**

All you'll need is any computer running macOS or Linux.

**Creating database and collection**

For this quickstart we will create a database named _sampledb_ and then
create a collection _users_ inside it.

Creating a database is as easy as calling an API, and it is ready in an
instant.

```shell
curl -X POST http://localhost:8081/api/v1/databases/sampledb/create
```

Similarly, a collection is instantaneously created through the API. In
Tigris, a collection is an ordered set of records called documents that all
follow a specific schema and whose fields are strongly typed.

```shell
curl http://localhost:8081/api/v1/databases/sampledb/collections/users/createOrUpdate \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "schema": {
          "title": "users",
          "properties": {
            "balance": {
              "type": "number"
            },
            "id": {
              "type": "integer",
              "format": "int32",
              "autoGenerate": true
            },
            "name": {
              "type": "string"
            }
          },
          "primary_key": [
            "id"
          ]
        }
      }'
```

The schema of the collections created above can be fetched as follows

```shell
curl -X POST http://localhost:8081/api/v1/databases/sampledb/collections/users/describe
```

**Insert some documents**

The following example will replace documents with the same `id` if they
already exist, or create new documents if they don't exist with the same `id`.

```shell
curl http://localhost:8081/api/v1/databases/sampledb/collections/users/documents/insert \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "documents": [
          {"name": "Jania McGrory", "balance": 6045.7},
          {"name": "Bunny Instone", "balance": 2948.87}
        ]
      }'
```

**Read a document using the primary key field**

Read the document from the collection by using its `id`.

```shell
curl http://localhost:8081/api/v1/databases/sampledb/collections/users/documents/read \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "filter": {"id": 1}
      }'
```

**Read a document using any field in the schema**

Read the document from the collection by using the field `name`.

```shell
curl http://localhost:8081/api/v1/databases/sampledb/collections/users/documents/read \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "filter": {"name": "Jania McGrory"}
      }'
```

**Update a document**

Update one of the fields in a document by using its `id`.

```shell
curl http://localhost:8081/api/v1/databases/sampledb/collections/users/documents/update \
      -X PUT \
      -H "Content-Type: application/json" \
      -d '{
        "fields": {
          "$set": {"balance": 2448.87}
        },
        "filter": {"id": 2}
      }'
```

**Search for users with `name` like "bunny" and `balance` greater than 500**

```shell
curl http://localhost:8081/api/v1/databases/sampledb/collections/users/documents/search \
      -X POST \
      -H "Content-Type: application/json" \
      -d '{
        "q": "bunny",
        "search_fields": ["name"],
        "filter": {"balance": {"$gt": 500}}
      }'
```

**Delete documents**

Use the delete API to remove the documents from the collection
based on the filter.

```shell
curl http://localhost:8081/api/v1/databases/sampledb/collections/users/documents/delete \
      -X DELETE \
      -H "Content-Type: application/json" \
      -d '{
        "filter": {
          "$or": [
            {"id": 1},
            {"id": 2}
          ]
        }
      }'
```

**Drop database**

Finally, drop the database _sampledb_ we have created for this quickstart
with all its collections.

```shell
curl -X DELETE http://localhost:8081/api/v1/databases/sampledb/drop
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

**Prerequisites**

All you'll need is any computer running macOS or Linux, with
[NodeJS](https://nodejs.org/en/) v12 or later installed.

**Quickstart**

Let's run following command to scaffold a Tigris quickstart app that
demonstrates Tigris operations.

```shell
mkdir tigris-quickstart-ts && cd tigris-quickstart-ts
npx create-tigris-app
```

**Code overview**

Above code scaffolded the project with following directory structure.

```
.
├── package.json
├── src
│   ├── app.ts
│   ├── index.ts
│   ├── controllers
│   │   └── user-controller.ts
│   └── models
│       └── user.ts
└── tsconfig.json
```

- `index.ts` is the entry-point for the generated application.
- `app.ts` is the application class that initializes the Tigris client.
- `models/user.ts` contains the data-container and schema for `users`
  collection.
- `controllers/user-controller.ts` has CRUD routes to mane `users` collection.

**Compile and start the application**

```shell
npm run build && npm run start
```

**Insert users**

Run following commands to create two users: John and Jane

```shell
curl localhost:8080/users/create \
    -X POST \
    -H 'Content-Type: application/json' \
    -d '{"name": "John", "balance": 6045.7}'

curl localhost:8080/users/create \
    -X POST \
    -H 'Content-Type: application/json' \
    -d '{"name": "Jane", "balance": 2948.87}'
```

**Insert products**

Run the following commands to insert products

```shell
curl localhost:8080/products/create \
    -X POST \
    -H 'Content-Type: application/json' \
    -d '{"name": "Avocado", "price": 10, "quantity": 5}'

curl localhost:8080/products/create \
    -X POST \
    -H 'Content-Type: application/json' \
    -d '{"name": "Avocado Oil", "price": 80, "quantity": 15}'

curl localhost:8080/products/create \
    -X POST \
    -H 'Content-Type: application/json' \
    -d '{"name": "Gold", "price": 3000, "quantity": 1}'
```

**Check the balances and stock**

Now go ahead and confirm that data has been persisted in DB

```shell
curl http://localhost:8080/users/1
curl http://localhost:8080/products/1
```

**Search**

Lets search for users

```shell
curl http://localhost:8080/users/search \
    -X POST \
    -H 'Content-Type: application/json' \
    -d '{"q": "john"}'
```

Or search for products named "avocado" and price less than 50

```shell
curl localhost:8080/products/search \
    -X POST \
    -H 'Content-Type: application/json' \
    -d '{
        "q": "avocado",
        "searchFields": ["name"],
        "filter": {"price": {"$lt": 50}}
      }'
```

</TabItem>
<TabItem value="go" label="Go">

**Prerequisites**

All you'll need is any computer running macOS or Linux, with
[Golang 1.18 or newer](https://go.dev/dl/) and Docker installed.

You also need to install [Tigris CLI](/cli).

**Scaffolding the project**

Run scaffold command to generate project files:

```shell
tigris scaffold go Mycompany Myproject HelloDB User
```

This will:

- Create directory with the name Myproject
- Initialize Go module `github.com/Mycompany/Myproject
- Generate main.go

The main.go file contains the code, which initializes the client,
connects to Tigris instance and execute example document APIs.

** Build and run **

```shell
cd Myproject
go mod tidy
go build .
```

After successful execution of above commands you should have `./Myproject` binary in the
current directory.

To test the binary you can bring a local Tigris instance up using [CLI](/cli)

```shell
tigris local up
```

or connect to the hosted instance, by obtaining `ApplicationId` and `ApplicationSecret`
in the Tigris web console and add credentials in the configuration structure:

```go
cfg := &config.Database{Driver: config.Driver{
    URL:               "api.preview.tigrisdata.cloud",
    ApplicationId:     {application_id}},
    ApplicationSecret: {application_secret},
}}
```

now execute compiled binary which performs API call and output the results on the console:

```
./Myproject
```

You can now start modifying and extending main.go for your needs.

</TabItem>
<TabItem value="java" label="Java">

**Prerequisites**

All you'll need is any computer running macOS or Linux, with
[JDK 1.8 or newer](https://adoptopenjdk.net/) installed.

**Add the client library dependency to your project**

```xml
<dependency>
  <groupId>com.tigrisdata</groupId>
  <artifactId>tigris-client</artifactId>
  <version>${tigris.client.java.version}</version>
</dependency>
```

For latest version and for other dependency management or build
tool you can refer to dependency
snippet from [here](https://mvnrepository.com/artifact/com.tigrisdata/tigris-client)

**Quickstart**

```java title=TigrisApp.java
import com.tigrisdata.db.annotation.TigrisPrimaryKey;
import com.tigrisdata.db.client.Filters;
import com.tigrisdata.db.client.InsertResponse;
import com.tigrisdata.db.client.StandardTigrisClient;
import com.tigrisdata.db.client.TigrisClient;
import com.tigrisdata.db.client.TigrisCollection;
import com.tigrisdata.db.client.TigrisDatabase;
import com.tigrisdata.db.client.UpdateFields;
import com.tigrisdata.db.client.config.TigrisConfiguration;
import com.tigrisdata.db.client.error.TigrisException;
import com.tigrisdata.db.type.TigrisCollectionType;

import java.util.Objects;

public class TigrisApp {
    public static void main(String[] args) throws TigrisException {
        // configure the client
        TigrisConfiguration config =
            TigrisConfiguration.newBuilder("localhost:8081")
                .withNetwork(
                    TigrisConfiguration.NetworkConfig.newBuilder()
                        .usePlainText() // for dev env - plaintext communication
                        .build())
                .build();

        // initialize the client
        TigrisClient client = StandardTigrisClient.getInstance(config);

        // create the database if it does not exist,
        // and fetch the database object
        TigrisDatabase helloDB = client.createDatabaseIfNotExists("hello-db");

        // create the collections if they don't exist, or
        // update the collection schema
        helloDB.createOrUpdateCollections(User.class);

        // fetch the collection object, all the CRUD operations on the
        // collection will be performed through this collection object
        TigrisCollection<User> users = helloDB.getCollection(User.class);

        // insert
        User jania = new User("Jania McGrory", 6045.7);
        User bunny = new User("Bunny Instone", 2948.87);
        users.insert(jania);
        users.insert(bunny);

        // read the auto-generated ids
        int janiaId = jania.getUserId();
        int bunnyId = bunny.getUserId();

        // find the user by primary key field
        User user = users.readOne(Filters.eq("userId", janiaId)).get();

        // find user with Name Jania McGrory
        User user = users.readOne(Filters.eq("name", "Jania McGrory")).get();

        // update
        users.update(
            Filters.eq("userId", janiaId),
            UpdateFields.newBuilder()
                .set("name", "Jania McGrover")
                .build()
        );

        // transaction - transfer balance between users
        helloDB.transact(
          (tx) -> {
              try {
                  users.update(
                      tx,
                      Filters.eq("userId", janiaId),
                      UpdateFields
                          .newBuilder()
                          .set("balance", jania.getBalance() - 100)
                          .build());
                  users.update(
                      tx,
                      Filters.eq("userId", bunnyId),
                      UpdateFields
                          .newBuilder()
                          .set("balance", bunny.getBalance() + 100)
                          .build());
              } catch (TigrisException tigrisException) {
                  // auto-rollback after throwing exception.
                  throw new IllegalStateException("Transaction failed", tigrisException);
              }
          });

        // Search for users with `name` like "bunny" and `balance` greater than 500
        SearchRequest request = SearchRequest.newBuilder()
                                    .withQuery("bunny")
                                    .withSearchFields("name")
                                    .withFilter(Filters.gt("balance", 500))
                                    .build();
        Iterator<SearchResult<User>> results = users.search(request);
        while (results.hasNext()) {
            SearchResult<User> result = results.next();
        }

        // delete users
        users.delete(Filters.eq("userId", janiaId));
        users.delete(Filters.eq("userId", bunnyId));

        // drop the database and its collections
        client.dropDatabase("hello-db");
    }

    public static class User implements TigrisCollectionType {
        @TigrisPrimaryKey(order = 1, autoGenerate = true)
        private int userId;
        private String name;
        private double balance;

        public User() {
        }

        public User(String name, double balance) {
            this.name = name;
            this.balance = balance;
        }

        public int getUserId() {
            return userId;
        }

        public void setUserId(int userId) {
            this.userId = userId;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public double getBalance() {
            return balance;
        }

        public void setBalance(double balance) {
            this.balance = balance;
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;
            User user = (User) o;
            return userId == user.userId
                      && Double.compare(user.balance, balance) == 0
                      && Objects.equals(name, user.name);
        }

        @Override
        public int hashCode() {
            return Objects.hash(userId, name, balance);
        }
    }
}
```

</TabItem>
</Tabs>
